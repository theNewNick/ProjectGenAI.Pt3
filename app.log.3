2024-12-05 05:21:08,655 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations and comparisons: \n\n1. **Sector Agent**: The sector_agent's assumptions align well with industry trends and historical data. The revenue growth and cost projections are within reasonable ranges for the sector. Confidence Score: 0.8 \n\n2. **Industry Agent**: The industry_agent's assumptions show a slightly more optimistic view compared to historical data. While revenue growth projections are aggressive, they are plausible given market conditions. Cost assumptions need further justification. Confidence Score: 0.6 \n\n3. **Sub-Industry Agent**: The sub_industry_agent's assumptions are in line with industry benchmarks and historical performance. However, the cost projections seem conservative compared to revenue growth. Confidence Score: 0.7 \n\n4. **Scenario Agent**: The scenario_agent's assumptions present a scenario analysis that covers a wide range of possibilities. The assumptions are logical and provide a comprehensive view of potential outcomes. Confidence Score: 0.9 \n\n5. **Company Agent**: The company_agent's assumptions are detailed and specific to the company's operations. Revenue growth projections are supported by market research, but cost assumptions may need further validation. Confidence Score: 0.7 \n\n6. **Feedback Agent**: The feedback_agent's input provides valuable insights into potential risks and opportunities. The feedback aligns well with the assumptions made by other agents, enhancing overall confidence. Confidence Score: 0.8 \n\n7. **Historical Data Agent**: The historical_data_agent's data serves as a crucial benchmark for evaluating the other agents' assumptions. Discrepancies between historical data and some agents' projections require clarification. Confidence Score: 0.9 \n\n8. **Sentiment Agent**: The sentiment_agent's analysis adds a qualitative perspective to the financial assumptions. While not directly impacting the numerical values, sentiment analysis can influence market perception and investor behavior. Confidence Score: 0.7",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.6,
        "sub_industry_agent": 0.7,
        "scenario_agent": 0.9,
        "company_agent": 0.7,
        "feedback_agent": 0.8,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:08,657 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1233]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1214, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.09544303797468354, 0.23253164556962022, 0.6193037974683543, 0.10683544303797467, 0.02443037974683544, 0.47816455696202526)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 05:21:11,977 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:12,778 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:13,528 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:14,323 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:15,228 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:15,230 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 05:21:16,015 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:16,040 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:601]
2024-12-05 05:21:16,205 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:784]
2024-12-05 05:21:21,224 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08, // Adjusted to align with company_agent
        "tax_rate": 0.25, // No change needed
        "cogs_pct": 0.6, // Adjusted to align with company_agent
        "WACC": 0.1, // No change needed
        "terminal_growth_rate": 0.03, // No change needed
        "operating_expenses_pct": 0.75 // Adjusted to align with company_agent
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05, // No change needed
        "tax_rate": 0.21, // No change needed
        "cogs_pct": 0.6, // No change needed
        "WACC": 0.1, // No change needed
        "terminal_growth_rate": 0.02, // No change needed
        "operating_expenses_pct": 0.2 // No change needed
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05, // No change needed
        "tax_rate": 0.21, // No change needed
        "cogs_pct": 0.6, // No change needed
        "WACC": 0.1, // No change needed
        "terminal_growth_rate": 0.02, // No change needed
        "operating_expenses_pct": 0.2 // No change needed
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:21,224 ERROR: Error during simulated collaboration [in /home/ec2-user/financial_modeling_assistant/app.py:824]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 817, in simulate_agent_collaboration
    refined_adjustments = json.loads(json_match.group())
  File "/usr/lib64/python3.9/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python3.9/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python3.9/json/decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 43 column 38 (char 1155)
2024-12-05 05:21:22,292 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.15
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:26,583 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations and comparisons: \n\n1. **Sector Agent**: The assumptions provided by the sector agent align well with the overall economic conditions and sector-specific trends. The growth rate projections are within a reasonable range based on historical data and market expectations. Confidence Score: 0.8 \n\n2. **Industry Agent**: The industry agent's assumptions show a slightly more optimistic outlook compared to the sector agent. While the growth projections are higher, they are still justifiable considering the industry's growth potential. Some discrepancies exist in cost assumptions, which need further clarification. Confidence Score: 0.7 \n\n3. **Sub-Industry Agent**: The sub-industry agent's assumptions exhibit a conservative approach, especially in revenue projections. This could be due to a more cautious outlook on market conditions. However, the cost assumptions seem to be on the higher side, requiring validation against industry benchmarks. Confidence Score: 0.6 \n\n4. **Scenario Agent**: The scenario agent provides a range of assumptions based on different market scenarios, which is a good practice for risk management. The assumptions are well-documented and supported by logical reasoning. Confidence Score: 0.9 \n\n5. **Company Agent**: The company agent's assumptions are detailed and specific to the company's operations. Revenue projections are in line with historical growth rates, but cost assumptions need further validation against industry standards. Confidence Score: 0.7 \n\n6. **Feedback Agent**: The feedback agent's input provides valuable insights into potential risks and opportunities. The feedback on cost management and revenue diversification is crucial for refining the financial assumptions. Confidence Score: 0.8 \n\n7. **Historical Data Agent**: The historical data agent's input serves as a benchmark for evaluating the reasonableness of the assumptions. Discrepancies between the assumptions and historical data should be carefully reviewed and justified. Confidence Score: 0.8 \n\n8. **Sentiment Agent**: The sentiment agent's analysis of market sentiment adds another layer of context to the financial assumptions. It helps in understanding how external factors may impact the financial projections. Confidence Score: 0.7",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.9,
        "company_agent": 0.7,
        "feedback_agent": 0.8,
        "historical_data_agent": 0.8,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 05:21:26,584 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1233]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1214, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.09872483221476511, 0.23845637583892615, 0.6322147651006712, 0.10563758389261745, 0.025234899328859056, 0.5577181208053692)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:00,902 DEBUG: Existing labels: ['TotalRevenue', 'OperatingRevenue', 'CostOfRevenue', 'GrossProfit', 'OperatingExpense', 'SellingGeneralAndAdministration', 'DepreciationAmortizationDepletionIncomeStatement', 'DepreciationAndAmortizationInIncomeStatement', 'Amortization', 'AmortizationOfIntangiblesIncomeStatement', 'OperatingIncome', 'NetNonOperatingInterestIncomeExpense', 'InterestIncomeNonOperating', 'InterestExpenseNonOperating', 'TotalOtherFinanceCost', 'OtherIncomeExpense', 'GainOnSaleOfSecurity', 'EarningsFromEquityInterest', 'SpecialIncomeCharges', 'RestructuringAndMergernAcquisition', 'OtherSpecialCharges', 'GainOnSaleOfBusiness', 'GainOnSaleOfPPE', 'OtherNonOperatingIncomeExpenses', 'PretaxIncome', 'TaxProvision', 'NetIncomeCommonStockholders', 'NetIncome', 'NetIncomeIncludingNoncontrollingInterests', 'NetIncomeContinuousOperations', 'NetIncomeDiscontinuousOperations', 'NetIncomeExtraordinary', 'MinorityInterests', 'DilutedNIAvailtoComStockholders', 'BasicEPS', 'DilutedEPS', 'BasicAverageShares', 'DilutedAverageShares', 'TotalExpenses', 'NetIncomeFromContinuingAndDiscontinuedOperation', 'NormalizedIncome', 'InterestIncome', 'InterestExpense', 'NetInterestIncome', 'EBIT', 'EBITDA', 'ReconciledCostOfRevenue', 'ReconciledDepreciation', 'NetIncomeFromContinuingOperationNetMinorityInterest', 'TotalUnusualItemsExcludingGoodwill', 'TotalUnusualItems', 'NormalizedEBITDA', 'TaxRateForCalcs', 'TaxEffectOfUnusualItems'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:50:00,910 DEBUG: Field mapping: {'Revenue': 'TotalRevenue', 'COGS': 'CostOfRevenue', 'Operating Expenses': 'OperatingExpense'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:50:00,914 DEBUG: Existing labels: ['TotalAssets', 'CurrentAssets', 'CashCashEquivalentsAndShortTermInvestments', 'CashAndCashEquivalents', 'Receivables', 'AccountsReceivable', 'TaxesReceivable', 'OtherReceivables', 'ReceivablesAdjustmentsAllowances', 'Inventory', 'PrepaidAssets', 'CurrentDeferredAssets', 'CurrentDeferredTaxesAssets', 'OtherCurrentAssets', 'TotalNonCurrentAssets', 'NetPPE', 'GrossPPE', 'Properties', 'LandAndImprovements', 'BuildingsAndImprovements', 'MachineryFurnitureEquipment', 'OtherProperties', 'ConstructionInProgress', 'Leases', 'AccumulatedDepreciation', 'GoodwillAndOtherIntangibleAssets', 'Goodwill', 'OtherIntangibleAssets', 'InvestmentsAndAdvances', 'LongTermEquityInvestment', 'InvestmentinFinancialAssets', 'AvailableForSaleSecurities', 'NonCurrentAccountsReceivable', 'NonCurrentDeferredAssets', 'NonCurrentPrepaidAssets', 'OtherNonCurrentAssets', 'TotalLiabilitiesNetMinorityInterest', 'CurrentLiabilities', 'PayablesAndAccruedExpenses', 'Payables', 'AccountsPayable', 'TotalTaxPayable', 'IncomeTaxPayable', 'OtherPayable', 'CurrentAccruedExpenses', 'PensionandOtherPostRetirementBenefitPlansCurrent', 'CurrentDebtAndCapitalLeaseObligation', 'CurrentDebt', 'CurrentDeferredLiabilities', 'CurrentDeferredRevenue', 'OtherCurrentLiabilities', 'TotalNonCurrentLiabilitiesNetMinorityInterest', 'LongTermDebtAndCapitalLeaseObligation', 'LongTermDebt', 'LongTermCapitalLeaseObligation', 'NonCurrentDeferredLiabilities', 'NonCurrentDeferredTaxesLiabilities', 'NonCurrentDeferredRevenue', 'EmployeeBenefits', 'NonCurrentPensionAndOtherPostretirementBenefitPlans', 'PreferredSecuritiesOutsideStockEquity', 'OtherNonCurrentLiabilities', 'TotalEquityGrossMinorityInterest', 'StockholdersEquity', 'CapitalStock', 'PreferredStock', 'CommonStock', 'RetainedEarnings', 'TreasuryStock', 'GainsLossesNotAffectingRetainedEarnings', 'ForeignCurrencyTranslationAdjustments', 'OtherEquityAdjustments', 'OtherEquityInterest', 'MinorityInterest', 'TotalCapitalization', 'CommonStockEquity', 'CapitalLeaseObligations', 'NetTangibleAssets', 'WorkingCapital', 'InvestedCapital', 'TangibleBookValue', 'TotalDebt', 'NetDebt', 'ShareIssued', 'OrdinarySharesNumber', 'TreasurySharesNumber'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:50:00,918 DEBUG: Field mapping: {'Current Assets': 'CurrentAssets', 'Current Liabilities': 'CurrentLiabilities'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:50:00,922 DEBUG: Existing labels: ['OperatingCashFlow', 'CashFlowFromContinuingOperatingActivities', 'NetIncomeFromContinuingOperations', 'OperatingGainsLosses', 'GainLossOnSaleOfBusiness', 'GainLossOnSaleOfPPE', 'GainLossOnInvestmentSecurities', 'EarningsLossesFromEquityInvestments', 'PensionAndEmployeeBenefitExpense', 'DepreciationAmortizationDepletion', 'DepreciationAndAmortization', 'Depreciation', 'AmortizationCashFlow', 'AmortizationOfIntangibles', 'DeferredTax', 'DeferredIncomeTax', 'AssetImpairmentCharge', 'StockBasedCompensation', 'OtherNonCashItems', 'ChangeInWorkingCapital', 'ChangeInReceivables', 'ChangeInInventory', 'ChangeInPayablesAndAccruedExpense', 'ChangeInPayable', 'ChangeInTaxPayable', 'ChangeInIncomeTaxPayable', 'ChangeInAccountPayable', 'ChangeInOtherCurrentAssets', 'ChangeInOtherCurrentLiabilities', 'ChangeInOtherWorkingCapital', 'DividendReceivedCFO', 'CashFromDiscontinuedOperatingActivities', 'InvestingCashFlow', 'CashFlowFromContinuingInvestingActivities', 'NetPPEPurchaseAndSale', 'PurchaseOfPPE', 'SaleOfPPE', 'NetBusinessPurchaseAndSale', 'PurchaseOfBusiness', 'SaleOfBusiness', 'NetInvestmentPurchaseAndSale', 'PurchaseOfInvestment', 'SaleOfInvestment', 'NetOtherInvestingChanges', 'CashFromDiscontinuedInvestingActivities', 'FinancingCashFlow', 'CashFlowFromContinuingFinancingActivities', 'NetIssuancePaymentsOfDebt', 'NetLongTermDebtIssuance', 'LongTermDebtIssuance', 'LongTermDebtPayments', 'NetShortTermDebtIssuance', 'NetCommonStockIssuance', 'CommonStockIssuance', 'CommonStockPayments', 'CashDividendsPaid', 'CommonStockDividendPaid', 'ProceedsFromStockOptionExercised', 'NetOtherFinancingCharges', 'CashFromDiscontinuedFinancingActivities', 'CashFlowFromDiscontinuedOperation', 'EndCashPosition', 'ChangesInCash', 'EffectOfExchangeRateChanges', 'BeginningCashPosition', 'OtherCashAdjustmentOutsideChangeinCash', 'IncomeTaxPaidSupplementalData', 'InterestPaidSupplementalData', 'CapitalExpenditure', 'IssuanceOfCapitalStock', 'IssuanceOfDebt', 'RepaymentOfDebt', 'RepurchaseOfCapitalStock', 'FreeCashFlow'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:50:00,929 DEBUG: Field mapping: {'Depreciation': 'Depreciation', 'Capital Expenditures': 'CapitalExpenditure'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:50:15,984 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:16,263 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:16,596 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:16,802 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:17,023 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:17,406 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:17,671 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:17,789 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:18,154 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:18,596 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:18,644 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.025,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:19,107 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.025,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:19,575 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:19,589 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:19,747 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:19,760 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:20,343 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:20,527 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:20,557 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:20,732 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:21,045 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:21,088 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:23,105 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:23,118 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:23,861 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:23,983 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:24,262 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:25,445 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:25,445 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:25,445 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:25,445 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:26,358 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:26,766 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:26,766 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:26,766 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:26,767 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:27,729 DEBUG: Agent output: {
  "sector_agent": 0.05,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.05,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.4,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:28,621 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key findings: The sector_agent, industry_agent, and sub_industry_agent assumptions align well with historical data and current market conditions. The scenario_agent has provided a reasonable range of scenarios, but some assumptions are on the optimistic side. The company_agent has made conservative estimates, which might be prudent considering the market volatility. The feedback_agent has provided valuable insights that support the assumptions made by other agents. The historical_data_agent has been consistent with past trends, providing a solid foundation for comparison. The sentiment_agent has offered a positive outlook, which is in line with the overall market sentiment.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.85,
        "sub_industry_agent": 0.85,
        "scenario_agent": 0.75,
        "company_agent": 0.80,
        "feedback_agent": 0.85,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.80
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:28,623 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06023738872403559, 0.23528189910979222, 0.6284866468842728, 0.10605341246290799, 0.025430267062314535, 0.5520771513353115)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:29,480 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:29,584 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:29,585 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:29,585 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:29,585 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:29,764 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key findings: The sector_agent, industry_agent, and sub_industry_agent all provided assumptions that are within reasonable ranges and consistent with the sector, industry, and sub-industry specifics. The scenario_agent's assumptions were logical and aligned with current market conditions. The company_agent's assumptions were also in line with historical trends and company specifics. The feedback_agent's input provided valuable insights and suggestions for improvement. The historical_data_agent's data served as a benchmark for comparison and validation. The sentiment_agent's analysis added a qualitative perspective to the financial assumptions.",

    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.85,
        "sub_industry_agent": 0.85,
        "scenario_agent": 0.80,
        "company_agent": 0.85,
        "feedback_agent": 0.75,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.80
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:29,766 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.059709302325581394, 0.23139534883720927, 0.6193313953488373, 0.10296511627906978, 0.02511627906976744, 0.49215116279069765)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:30,316 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:30,441 DEBUG: Agent output: {
  "sector_agent": 0.05,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:30,617 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:31,104 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:31,361 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:31,779 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:32,104 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:32,586 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:32,587 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:32,718 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent's assumptions are within the specified ranges and align well with historical data. The industry_agent's assumptions show some discrepancies in revenue growth projections compared to historical trends but are generally coherent. The sub_industry_agent's assumptions are consistent with sector and industry specifics but lack detailed reasoning. The scenario_agent's assumptions are logical and align with current market conditions. The company_agent's assumptions are mostly accurate but show a slight deviation in cost projections. The feedback_agent's assumptions are not provided. The historical_data_agent's assumptions are based on actual historical data and provide a solid foundation for comparison. The sentiment_agent's assumptions lack clarity and detailed reasoning.",
    "confidence_scores": {
        "sector_agent": 0.9,
        "industry_agent": 0.8,
        "sub_industry_agent": 0.7,
        "scenario_agent": 0.85,
        "company_agent": 0.8,
        "feedback_agent": 0,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.6
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:32,721 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.059490445859872614, 0.2324203821656051, 0.6286624203821656, 0.10382165605095542, 0.025063694267515924, 0.49490445859872617)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:32,941 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:33,324 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:33,350 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:33,523 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:33,539 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:34,025 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:34,026 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:34,698 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:34,854 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:34,881 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:35,104 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:35,875 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:36,645 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:37,473 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:37,474 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:38,512 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:38,538 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:38,737 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:38,809 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:38,809 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:38,809 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:38,810 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:39,800 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:40,178 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:40,179 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:40,179 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:40,179 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:40,890 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:40,891 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060447284345047925, 0.23492012779552715, 0.6277955271565495, 0.10536741214057509, 0.02527156549520767, 0.5261980830670927)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:41,094 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:41,729 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:42,454 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:43,073 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:43,073 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:43,074 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:43,074 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:43,122 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:43,383 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and evaluations: The sector_agent's assumptions are in line with the overall sector trends and historical data. The industry_agent's assumptions show some discrepancies with historical data, especially in revenue projections. The sub_industry_agent's assumptions are consistent with industry-specific trends and historical data. The scenario_agent's assumptions are logical and align well with the current market conditions. The company_agent's assumptions are mostly accurate, but there are slight deviations in cost projections. The feedback_agent's assumptions provide valuable insights and suggestions for improvement. The historical_data_agent's assumptions serve as a benchmark for evaluating other agents' outputs. The sentiment_agent's assumptions reflect positive market sentiment but may be slightly optimistic.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.75,
        "sub_industry_agent": 0.80,
        "scenario_agent": 0.90,
        "company_agent": 0.80,
        "feedback_agent": 0.70,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.80
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:43,384 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060360360360360354, 0.23702702702702702, 0.632882882882883, 0.10666666666666667, 0.025675675675675674, 0.5554054054054054)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:43,879 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.08,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.60
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:44,083 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:44,104 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:44,732 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:44,734 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:44,901 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:45,172 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:45,173 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060377358490566045, 0.23465408805031443, 0.6273584905660378, 0.10327044025157232, 0.025220125786163523, 0.529874213836478)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:45,542 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:45,567 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:45,724 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:45,870 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:46,195 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:46,533 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.025,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:46,927 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:47,309 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:47,310 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:47,613 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:48,113 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:48,139 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:48,401 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:48,429 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:49,162 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:49,163 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:49,956 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:49,981 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:50,156 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:50:51,575 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:51,575 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:51,575 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:51,575 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:52,570 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.15
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:53,193 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:53,193 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:53,193 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:53,193 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:53,615 DEBUG: Agent output: {
    "reasoning": "Upon reviewing the financial assumptions provided by each agent, the following analysis and confidence scores have been determined:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.65
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:53,618 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06014749262536874, 0.2347787610619469, 0.6277286135693216, 0.1040117994100295, 0.02530973451327434, 0.525368731563422)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:54,343 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:54,436 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.15
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:55,137 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:55,175 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:55,175 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:50:55,175 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:50:55,175 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:50:56,001 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:56,198 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.15,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:56,251 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations: The sector_agent, industry_agent, and sub_industry_agent assumptions align well with historical data and current market conditions. The scenario_agent has provided a slightly optimistic outlook compared to historical trends, which may be influenced by external factors. The company_agent has made reasonable assumptions based on its specific circumstances. The feedback_agent has raised valid points for consideration. The historical_data_agent has provided a solid foundation for comparison. The sentiment_agent's assumptions are in line with the overall market sentiment.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.85,
        "sub_industry_agent": 0.85,
        "scenario_agent": 0.75,
        "company_agent": 0.80,
        "feedback_agent": 0.75,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.80
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:56,252 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.05972677595628415, 0.2349180327868852, 0.6285519125683059, 0.10650273224043717, 0.02581967213114754, 0.5282786885245903)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:56,675 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:57,259 DEBUG: Agent output: {
    "reasoning": "Upon reviewing the financial assumptions provided by each agent, the following analysis and confidence scores have been determined:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:57,260 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06020202020202021, 0.2341077441077441, 0.6292929292929293, 0.10565656565656568, 0.025016835016835017, 0.5365319865319865)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:57,469 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:57,471 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:50:58,233 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.5
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:50:58,261 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:50:58,455 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.5}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:51:03,420 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:51:03,420 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:51:03,420 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:51:03,421 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:51:04,399 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.1,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:51:05,514 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:51:05,515 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.061883116883116894, 0.23701298701298704, 0.6282467532467533, 0.10337662337662339, 0.02577922077922078, 0.5620129870129871)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:53:38,544 DEBUG: Existing labels: ['TotalRevenue', 'OperatingRevenue', 'CostOfRevenue', 'GrossProfit', 'OperatingExpense', 'SellingGeneralAndAdministration', 'DepreciationAmortizationDepletionIncomeStatement', 'DepreciationAndAmortizationInIncomeStatement', 'Amortization', 'AmortizationOfIntangiblesIncomeStatement', 'OperatingIncome', 'NetNonOperatingInterestIncomeExpense', 'InterestIncomeNonOperating', 'InterestExpenseNonOperating', 'TotalOtherFinanceCost', 'OtherIncomeExpense', 'GainOnSaleOfSecurity', 'EarningsFromEquityInterest', 'SpecialIncomeCharges', 'RestructuringAndMergernAcquisition', 'OtherSpecialCharges', 'GainOnSaleOfBusiness', 'GainOnSaleOfPPE', 'OtherNonOperatingIncomeExpenses', 'PretaxIncome', 'TaxProvision', 'NetIncomeCommonStockholders', 'NetIncome', 'NetIncomeIncludingNoncontrollingInterests', 'NetIncomeContinuousOperations', 'NetIncomeDiscontinuousOperations', 'NetIncomeExtraordinary', 'MinorityInterests', 'DilutedNIAvailtoComStockholders', 'BasicEPS', 'DilutedEPS', 'BasicAverageShares', 'DilutedAverageShares', 'TotalExpenses', 'NetIncomeFromContinuingAndDiscontinuedOperation', 'NormalizedIncome', 'InterestIncome', 'InterestExpense', 'NetInterestIncome', 'EBIT', 'EBITDA', 'ReconciledCostOfRevenue', 'ReconciledDepreciation', 'NetIncomeFromContinuingOperationNetMinorityInterest', 'TotalUnusualItemsExcludingGoodwill', 'TotalUnusualItems', 'NormalizedEBITDA', 'TaxRateForCalcs', 'TaxEffectOfUnusualItems'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:53:38,555 DEBUG: Field mapping: {'Revenue': 'TotalRevenue', 'COGS': 'CostOfRevenue', 'Operating Expenses': 'OperatingExpense'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:53:38,560 DEBUG: Existing labels: ['TotalAssets', 'CurrentAssets', 'CashCashEquivalentsAndShortTermInvestments', 'CashAndCashEquivalents', 'Receivables', 'AccountsReceivable', 'TaxesReceivable', 'OtherReceivables', 'ReceivablesAdjustmentsAllowances', 'Inventory', 'PrepaidAssets', 'CurrentDeferredAssets', 'CurrentDeferredTaxesAssets', 'OtherCurrentAssets', 'TotalNonCurrentAssets', 'NetPPE', 'GrossPPE', 'Properties', 'LandAndImprovements', 'BuildingsAndImprovements', 'MachineryFurnitureEquipment', 'OtherProperties', 'ConstructionInProgress', 'Leases', 'AccumulatedDepreciation', 'GoodwillAndOtherIntangibleAssets', 'Goodwill', 'OtherIntangibleAssets', 'InvestmentsAndAdvances', 'LongTermEquityInvestment', 'InvestmentinFinancialAssets', 'AvailableForSaleSecurities', 'NonCurrentAccountsReceivable', 'NonCurrentDeferredAssets', 'NonCurrentPrepaidAssets', 'OtherNonCurrentAssets', 'TotalLiabilitiesNetMinorityInterest', 'CurrentLiabilities', 'PayablesAndAccruedExpenses', 'Payables', 'AccountsPayable', 'TotalTaxPayable', 'IncomeTaxPayable', 'OtherPayable', 'CurrentAccruedExpenses', 'PensionandOtherPostRetirementBenefitPlansCurrent', 'CurrentDebtAndCapitalLeaseObligation', 'CurrentDebt', 'CurrentDeferredLiabilities', 'CurrentDeferredRevenue', 'OtherCurrentLiabilities', 'TotalNonCurrentLiabilitiesNetMinorityInterest', 'LongTermDebtAndCapitalLeaseObligation', 'LongTermDebt', 'LongTermCapitalLeaseObligation', 'NonCurrentDeferredLiabilities', 'NonCurrentDeferredTaxesLiabilities', 'NonCurrentDeferredRevenue', 'EmployeeBenefits', 'NonCurrentPensionAndOtherPostretirementBenefitPlans', 'PreferredSecuritiesOutsideStockEquity', 'OtherNonCurrentLiabilities', 'TotalEquityGrossMinorityInterest', 'StockholdersEquity', 'CapitalStock', 'PreferredStock', 'CommonStock', 'RetainedEarnings', 'TreasuryStock', 'GainsLossesNotAffectingRetainedEarnings', 'ForeignCurrencyTranslationAdjustments', 'OtherEquityAdjustments', 'OtherEquityInterest', 'MinorityInterest', 'TotalCapitalization', 'CommonStockEquity', 'CapitalLeaseObligations', 'NetTangibleAssets', 'WorkingCapital', 'InvestedCapital', 'TangibleBookValue', 'TotalDebt', 'NetDebt', 'ShareIssued', 'OrdinarySharesNumber', 'TreasurySharesNumber'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:53:38,565 DEBUG: Field mapping: {'Current Assets': 'CurrentAssets', 'Current Liabilities': 'CurrentLiabilities'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:53:38,568 DEBUG: Existing labels: ['OperatingCashFlow', 'CashFlowFromContinuingOperatingActivities', 'NetIncomeFromContinuingOperations', 'OperatingGainsLosses', 'GainLossOnSaleOfBusiness', 'GainLossOnSaleOfPPE', 'GainLossOnInvestmentSecurities', 'EarningsLossesFromEquityInvestments', 'PensionAndEmployeeBenefitExpense', 'DepreciationAmortizationDepletion', 'DepreciationAndAmortization', 'Depreciation', 'AmortizationCashFlow', 'AmortizationOfIntangibles', 'DeferredTax', 'DeferredIncomeTax', 'AssetImpairmentCharge', 'StockBasedCompensation', 'OtherNonCashItems', 'ChangeInWorkingCapital', 'ChangeInReceivables', 'ChangeInInventory', 'ChangeInPayablesAndAccruedExpense', 'ChangeInPayable', 'ChangeInTaxPayable', 'ChangeInIncomeTaxPayable', 'ChangeInAccountPayable', 'ChangeInOtherCurrentAssets', 'ChangeInOtherCurrentLiabilities', 'ChangeInOtherWorkingCapital', 'DividendReceivedCFO', 'CashFromDiscontinuedOperatingActivities', 'InvestingCashFlow', 'CashFlowFromContinuingInvestingActivities', 'NetPPEPurchaseAndSale', 'PurchaseOfPPE', 'SaleOfPPE', 'NetBusinessPurchaseAndSale', 'PurchaseOfBusiness', 'SaleOfBusiness', 'NetInvestmentPurchaseAndSale', 'PurchaseOfInvestment', 'SaleOfInvestment', 'NetOtherInvestingChanges', 'CashFromDiscontinuedInvestingActivities', 'FinancingCashFlow', 'CashFlowFromContinuingFinancingActivities', 'NetIssuancePaymentsOfDebt', 'NetLongTermDebtIssuance', 'LongTermDebtIssuance', 'LongTermDebtPayments', 'NetShortTermDebtIssuance', 'NetCommonStockIssuance', 'CommonStockIssuance', 'CommonStockPayments', 'CashDividendsPaid', 'CommonStockDividendPaid', 'ProceedsFromStockOptionExercised', 'NetOtherFinancingCharges', 'CashFromDiscontinuedFinancingActivities', 'CashFlowFromDiscontinuedOperation', 'EndCashPosition', 'ChangesInCash', 'EffectOfExchangeRateChanges', 'BeginningCashPosition', 'OtherCashAdjustmentOutsideChangeinCash', 'IncomeTaxPaidSupplementalData', 'InterestPaidSupplementalData', 'CapitalExpenditure', 'IssuanceOfCapitalStock', 'IssuanceOfDebt', 'RepaymentOfDebt', 'RepurchaseOfCapitalStock', 'FreeCashFlow'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:53:38,576 DEBUG: Field mapping: {'Depreciation': 'Depreciation', 'Capital Expenditures': 'CapitalExpenditure'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:53:50,951 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:51,218 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:51,396 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:51,862 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:51,927 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:52,361 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:52,621 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:52,660 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:53,178 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:53,334 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:53,446 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:53,985 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.025,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:54,537 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:54,551 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:53:54,794 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:54,807 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:53:54,945 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:54,959 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:53:55,348 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:55,540 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.15,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:55,566 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:53:55,682 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:53:55,738 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:53:55,792 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:53:55,960 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:53:55,972 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.15, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:53:56,165 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:00,769 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:00,769 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:00,769 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:00,769 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:00,941 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:00,941 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:00,941 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:00,941 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:01,293 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:01,293 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:01,293 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.025,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:01,294 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.025, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:01,578 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:01,900 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:02,181 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:02,674 DEBUG: Agent output: {
    "reasoning": "Upon reviewing the financial assumptions provided by each agent, the following analysis and confidence scores are assigned:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:02,677 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060344827586206906, 0.23457680250783697, 0.6272727272727273, 0.10614420062695927, 0.025203761755485898, 0.5216300940438872)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:03,277 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores for each agent's output:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:03,279 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.059884057971014495, 0.234231884057971, 0.6272463768115942, 0.10382608695652175, 0.025623188405797102, 0.5247826086956521)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:03,412 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:03,833 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent, industry_agent, and sub_industry_agent assumptions generally align well with historical data and current market conditions. The scenario_agent's assumptions show some discrepancies in growth rates compared to historical trends. The company_agent's assumptions are quite optimistic and may need further justification. The feedback_agent's assumptions are reasonable but lack depth in certain areas. The historical_data_agent provides a solid foundation for comparison. The sentiment_agent's assumptions are subjective and may not fully align with quantitative analysis.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.80,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.70,
        "company_agent": 0.65,
        "feedback_agent": 0.70,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.60
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:03,836 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060657894736842105, 0.23500000000000004, 0.6296052631578948, 0.10631578947368422, 0.025328947368421055, 0.5539473684210527)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:04,320 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:04,614 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:05,073 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:05,345 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:05,923 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:06,088 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:06,495 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:06,804 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:06,845 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:06,846 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:07,480 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:07,644 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:07,669 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:07,674 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:07,676 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:07,842 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:08,416 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:08,418 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:08,444 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:08,661 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:09,200 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:10,118 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:10,120 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:10,958 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:10,985 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:11,270 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:13,366 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:13,366 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:13,366 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:13,367 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:14,076 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:14,076 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:14,077 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:14,077 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:14,886 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:14,948 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.15
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:16,533 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:16,533 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:16,533 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:16,533 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:17,161 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and evaluations: The sector_agent's assumptions align well with industry trends and historical data, showing a good understanding of the sector's dynamics. The industry_agent's assumptions are generally in line with sector trends but show some discrepancies in growth projections compared to historical data. The sub_industry_agent's assumptions are quite optimistic and deviate significantly from historical data and sector averages. The scenario_agent's assumptions are logical and consider a range of potential outcomes, reflecting a good understanding of risk factors. The company_agent's assumptions are conservative and show a cautious approach, which may limit growth potential. The feedback_agent's assumptions provide valuable insights but lack specificity in certain areas, requiring further clarification. The historical_data_agent's assumptions serve as a benchmark for evaluating other agents' outputs, and discrepancies are noted where assumptions deviate significantly. The sentiment_agent's assumptions reflect market sentiment but may not fully capture underlying financial dynamics.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.5,
        "scenario_agent": 0.8,
        "company_agent": 0.6,
        "feedback_agent": 0.6,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:17,162 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.05884353741496599, 0.23340136054421767, 0.6299319727891157, 0.10544217687074829, 0.024761904761904763, 0.5272108843537414)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:17,212 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations: The sector_agent, industry_agent, and sub_industry_agent assumptions are generally aligned with historical data and current market conditions. The scenario_agent has provided a conservative estimate, which is in line with the historical trends. The company_agent assumptions show a slightly optimistic view compared to historical data but are within reasonable ranges. The feedback_agent has highlighted some discrepancies in assumptions that need further clarification. The historical_data_agent has provided a solid foundation for comparison. The sentiment_agent has considered market sentiment but may need more specific data to support the assumptions.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.75,
        "sub_industry_agent": 0.7,
        "scenario_agent": 0.85,
        "company_agent": 0.7,
        "feedback_agent": 0.6,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.65
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:17,212 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.05919642857142858, 0.23464285714285715, 0.6308035714285716, 0.10434523809523812, 0.02514880952380953, 0.5284226190476191)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:17,494 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:17,954 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:18,171 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:18,695 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:18,930 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:19,444 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:19,815 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:19,865 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent, industry_agent, and sub_industry_agent assumptions are generally aligned with historical data and industry trends. The scenario_agent assumptions show some discrepancies in growth rates compared to historical data. The company_agent assumptions are mostly logical and consistent with the company's specific situation. The feedback_agent assumptions are in line with market sentiment and expert opinions. The historical_data_agent assumptions serve as the baseline for comparison and are crucial for evaluating other agents' outputs. The sentiment_agent assumptions provide a qualitative perspective that complements the quantitative analysis.",

    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.80,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.70,
        "company_agent": 0.85,
        "feedback_agent": 0.80,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:19,866 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06208588957055215, 0.23748466257668707, 0.6300613496932517, 0.10687116564417179, 0.02601226993865031, 0.5822085889570553)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:20,360 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:20,512 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:20,929 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:21,441 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:21,442 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:21,531 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:21,532 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:21,698 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:22,308 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:22,336 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:22,413 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:22,439 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:22,516 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:22,522 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:22,616 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:23,291 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:24,101 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:24,102 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:24,875 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:24,901 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:25,071 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:27,834 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:27,834 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:27,834 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:27,834 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:28,347 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:28,347 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:28,347 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:28,347 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:28,710 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:29,237 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.15,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:29,958 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:29,959 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:29,959 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:29,959 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:30,837 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.1,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:31,177 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and evaluations: The sector_agent's assumptions align well with the overall sector trends and historical data. The industry_agent's assumptions show some discrepancies in revenue growth projections compared to historical data and industry benchmarks. The sub_industry_agent's assumptions are generally in line with sector and industry trends but lack detailed justification for certain cost assumptions. The scenario_agent's assumptions provide a range of scenarios, showing a good understanding of potential outcomes. The company_agent's assumptions are detailed and specific to the company's operations, with a focus on cost optimization. The feedback_agent's assumptions provide valuable insights into customer preferences and market dynamics. The historical_data_agent's assumptions serve as a benchmark for evaluating other agents' projections, highlighting areas of divergence. The sentiment_agent's assumptions reflect market sentiment but may need further validation against concrete financial data.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.6,
        "sub_industry_agent": 0.7,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.65
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:31,178 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.0608187134502924, 0.23432748538011697, 0.6271929824561404, 0.1056140350877193, 0.025204678362573105, 0.538888888888889)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:31,756 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores: The sector_agent's assumptions are generally in line with industry trends and historical data, with minor discrepancies in growth rates. Confidence score: 0.8. The industry_agent's assumptions show a good understanding of the industry specifics and are consistent with historical data. Confidence score: 0.85. The sub_industry_agent's assumptions align well with sub-industry trends and historical performance, with a few optimistic projections. Confidence score: 0.75. The scenario_agent's assumptions present a realistic view of potential scenarios, although some assumptions may be overly conservative. Confidence score: 0.7. The company_agent's assumptions demonstrate a deep understanding of the company's operations and market positioning, with some ambitious growth targets. Confidence score: 0.8. The feedback_agent's assumptions provide valuable insights and suggestions for improvement, enhancing overall analysis. Confidence score: 0.9. The historical_data_agent's assumptions serve as a benchmark for evaluating other agents' projections, highlighting deviations and guiding adjustments. Confidence score: 0.95. The sentiment_agent's assumptions reflect market sentiment effectively, contributing to a holistic view of the financial landscape. Confidence score: 0.85.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.85,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.7,
        "company_agent": 0.8,
        "feedback_agent": 0.9,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.85
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:31,757 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.059644970414201186, 0.23248520710059173, 0.6266272189349112, 0.10177514792899409, 0.02479289940828403, 0.5014792899408285)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:32,003 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:32,049 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:32,050 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06200000000000001, 0.2370967741935484, 0.6135483870967743, 0.10541935483870969, 0.02580645161290323, 0.5774193548387099)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:33,056 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:34,054 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:34,984 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:35,692 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:35,694 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: feedback.WACC_feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: feedback.WACC_feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:54:36,843 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:36,869 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:54:37,035 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:54:42,230 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:42,230 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:54:42,230 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:54:42,230 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:54:43,183 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.15,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:44,491 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.9,
        "company_agent": 0.75,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.85,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:54:44,492 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: table assumption_set has no column named WACC

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) table assumption_set has no column named WACC
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.059155844155844156, 0.2331168831168831, 0.6311688311688313, 0.10337662337662337, 0.02461038961038961, 0.5237012987012988)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:58:56,183 DEBUG: Existing labels: ['TotalRevenue', 'OperatingRevenue', 'CostOfRevenue', 'GrossProfit', 'OperatingExpense', 'SellingGeneralAndAdministration', 'DepreciationAmortizationDepletionIncomeStatement', 'DepreciationAndAmortizationInIncomeStatement', 'Amortization', 'AmortizationOfIntangiblesIncomeStatement', 'OperatingIncome', 'NetNonOperatingInterestIncomeExpense', 'InterestIncomeNonOperating', 'InterestExpenseNonOperating', 'TotalOtherFinanceCost', 'OtherIncomeExpense', 'GainOnSaleOfSecurity', 'EarningsFromEquityInterest', 'SpecialIncomeCharges', 'RestructuringAndMergernAcquisition', 'OtherSpecialCharges', 'GainOnSaleOfBusiness', 'GainOnSaleOfPPE', 'OtherNonOperatingIncomeExpenses', 'PretaxIncome', 'TaxProvision', 'NetIncomeCommonStockholders', 'NetIncome', 'NetIncomeIncludingNoncontrollingInterests', 'NetIncomeContinuousOperations', 'NetIncomeDiscontinuousOperations', 'NetIncomeExtraordinary', 'MinorityInterests', 'DilutedNIAvailtoComStockholders', 'BasicEPS', 'DilutedEPS', 'BasicAverageShares', 'DilutedAverageShares', 'TotalExpenses', 'NetIncomeFromContinuingAndDiscontinuedOperation', 'NormalizedIncome', 'InterestIncome', 'InterestExpense', 'NetInterestIncome', 'EBIT', 'EBITDA', 'ReconciledCostOfRevenue', 'ReconciledDepreciation', 'NetIncomeFromContinuingOperationNetMinorityInterest', 'TotalUnusualItemsExcludingGoodwill', 'TotalUnusualItems', 'NormalizedEBITDA', 'TaxRateForCalcs', 'TaxEffectOfUnusualItems'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:58:56,190 DEBUG: Field mapping: {'Revenue': 'TotalRevenue', 'COGS': 'CostOfRevenue', 'Operating Expenses': 'OperatingExpense'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:58:56,195 DEBUG: Existing labels: ['TotalAssets', 'CurrentAssets', 'CashCashEquivalentsAndShortTermInvestments', 'CashAndCashEquivalents', 'Receivables', 'AccountsReceivable', 'TaxesReceivable', 'OtherReceivables', 'ReceivablesAdjustmentsAllowances', 'Inventory', 'PrepaidAssets', 'CurrentDeferredAssets', 'CurrentDeferredTaxesAssets', 'OtherCurrentAssets', 'TotalNonCurrentAssets', 'NetPPE', 'GrossPPE', 'Properties', 'LandAndImprovements', 'BuildingsAndImprovements', 'MachineryFurnitureEquipment', 'OtherProperties', 'ConstructionInProgress', 'Leases', 'AccumulatedDepreciation', 'GoodwillAndOtherIntangibleAssets', 'Goodwill', 'OtherIntangibleAssets', 'InvestmentsAndAdvances', 'LongTermEquityInvestment', 'InvestmentinFinancialAssets', 'AvailableForSaleSecurities', 'NonCurrentAccountsReceivable', 'NonCurrentDeferredAssets', 'NonCurrentPrepaidAssets', 'OtherNonCurrentAssets', 'TotalLiabilitiesNetMinorityInterest', 'CurrentLiabilities', 'PayablesAndAccruedExpenses', 'Payables', 'AccountsPayable', 'TotalTaxPayable', 'IncomeTaxPayable', 'OtherPayable', 'CurrentAccruedExpenses', 'PensionandOtherPostRetirementBenefitPlansCurrent', 'CurrentDebtAndCapitalLeaseObligation', 'CurrentDebt', 'CurrentDeferredLiabilities', 'CurrentDeferredRevenue', 'OtherCurrentLiabilities', 'TotalNonCurrentLiabilitiesNetMinorityInterest', 'LongTermDebtAndCapitalLeaseObligation', 'LongTermDebt', 'LongTermCapitalLeaseObligation', 'NonCurrentDeferredLiabilities', 'NonCurrentDeferredTaxesLiabilities', 'NonCurrentDeferredRevenue', 'EmployeeBenefits', 'NonCurrentPensionAndOtherPostretirementBenefitPlans', 'PreferredSecuritiesOutsideStockEquity', 'OtherNonCurrentLiabilities', 'TotalEquityGrossMinorityInterest', 'StockholdersEquity', 'CapitalStock', 'PreferredStock', 'CommonStock', 'RetainedEarnings', 'TreasuryStock', 'GainsLossesNotAffectingRetainedEarnings', 'ForeignCurrencyTranslationAdjustments', 'OtherEquityAdjustments', 'OtherEquityInterest', 'MinorityInterest', 'TotalCapitalization', 'CommonStockEquity', 'CapitalLeaseObligations', 'NetTangibleAssets', 'WorkingCapital', 'InvestedCapital', 'TangibleBookValue', 'TotalDebt', 'NetDebt', 'ShareIssued', 'OrdinarySharesNumber', 'TreasurySharesNumber'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:58:56,199 DEBUG: Field mapping: {'Current Assets': 'CurrentAssets', 'Current Liabilities': 'CurrentLiabilities'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:58:56,203 DEBUG: Existing labels: ['OperatingCashFlow', 'CashFlowFromContinuingOperatingActivities', 'NetIncomeFromContinuingOperations', 'OperatingGainsLosses', 'GainLossOnSaleOfBusiness', 'GainLossOnSaleOfPPE', 'GainLossOnInvestmentSecurities', 'EarningsLossesFromEquityInvestments', 'PensionAndEmployeeBenefitExpense', 'DepreciationAmortizationDepletion', 'DepreciationAndAmortization', 'Depreciation', 'AmortizationCashFlow', 'AmortizationOfIntangibles', 'DeferredTax', 'DeferredIncomeTax', 'AssetImpairmentCharge', 'StockBasedCompensation', 'OtherNonCashItems', 'ChangeInWorkingCapital', 'ChangeInReceivables', 'ChangeInInventory', 'ChangeInPayablesAndAccruedExpense', 'ChangeInPayable', 'ChangeInTaxPayable', 'ChangeInIncomeTaxPayable', 'ChangeInAccountPayable', 'ChangeInOtherCurrentAssets', 'ChangeInOtherCurrentLiabilities', 'ChangeInOtherWorkingCapital', 'DividendReceivedCFO', 'CashFromDiscontinuedOperatingActivities', 'InvestingCashFlow', 'CashFlowFromContinuingInvestingActivities', 'NetPPEPurchaseAndSale', 'PurchaseOfPPE', 'SaleOfPPE', 'NetBusinessPurchaseAndSale', 'PurchaseOfBusiness', 'SaleOfBusiness', 'NetInvestmentPurchaseAndSale', 'PurchaseOfInvestment', 'SaleOfInvestment', 'NetOtherInvestingChanges', 'CashFromDiscontinuedInvestingActivities', 'FinancingCashFlow', 'CashFlowFromContinuingFinancingActivities', 'NetIssuancePaymentsOfDebt', 'NetLongTermDebtIssuance', 'LongTermDebtIssuance', 'LongTermDebtPayments', 'NetShortTermDebtIssuance', 'NetCommonStockIssuance', 'CommonStockIssuance', 'CommonStockPayments', 'CashDividendsPaid', 'CommonStockDividendPaid', 'ProceedsFromStockOptionExercised', 'NetOtherFinancingCharges', 'CashFromDiscontinuedFinancingActivities', 'CashFlowFromDiscontinuedOperation', 'EndCashPosition', 'ChangesInCash', 'EffectOfExchangeRateChanges', 'BeginningCashPosition', 'OtherCashAdjustmentOutsideChangeinCash', 'IncomeTaxPaidSupplementalData', 'InterestPaidSupplementalData', 'CapitalExpenditure', 'IssuanceOfCapitalStock', 'IssuanceOfDebt', 'RepaymentOfDebt', 'RepurchaseOfCapitalStock', 'FreeCashFlow'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 07:58:56,210 DEBUG: Field mapping: {'Depreciation': 'Depreciation', 'Capital Expenditures': 'CapitalExpenditure'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 07:59:10,790 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:11,287 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:11,601 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:11,979 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:12,000 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:12,473 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:12,758 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:12,874 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:13,236 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.85
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:13,540 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:13,852 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.08,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.85
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:14,268 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:14,281 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:14,595 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:15,053 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:15,168 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:15,457 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:15,470 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:15,559 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:15,585 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:15,599 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:16,277 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:16,366 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:16,454 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:16,570 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:16,716 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:16,853 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:19,985 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:19,985 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:19,985 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:19,985 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:21,119 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:21,324 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:21,324 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:21,324 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:21,324 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:22,389 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:22,396 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:22,396 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:22,396 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:22,396 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:23,232 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations: The sector_agent, industry_agent, and sub_industry_agent assumptions are generally aligned with historical data and current market conditions. The scenario_agent has provided a conservative estimate, which is reasonable given the uncertainties in the market. The company_agent assumptions are optimistic compared to historical performance but could be justified by potential growth opportunities. The feedback_agent has provided insightful comments that align with the financial assumptions. The historical_data_agent has provided a solid foundation for comparison. The sentiment_agent has considered market sentiment effectively, enhancing the overall analysis.",

    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.80,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.70,
        "company_agent": 0.75,
        "feedback_agent": 0.80,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.85
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:23,235 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.05999999999999999, 0.23469135802469135, 0.6277777777777777, 0.10382716049382716, 0.025308641975308643, 0.553395061728395)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:23,258 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:23,616 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores for each agent's output:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:23,619 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.05988505747126438, 0.23413793103448277, 0.614080459770115, 0.1037931034482759, 0.02517241379310345, 0.5408045977011494)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:23,935 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:24,277 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:24,279 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060315457413249216, 0.23460567823343842, 0.6274447949526814, 0.1034069400630915, 0.025205047318611985, 0.5528391167192428)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:24,432 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:24,782 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:25,004 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:25,226 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:25,746 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:25,980 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:26,084 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:26,407 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:26,813 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:26,916 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:27,150 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.08,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.85
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:27,647 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:27,648 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:27,713 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:27,714 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:27,942 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:27,943 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:28,401 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:28,427 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:28,475 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:28,504 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:28,629 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:28,712 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:28,740 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:28,782 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:28,940 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:33,046 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:33,046 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:33,046 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:33,046 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:33,265 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:33,266 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:33,266 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:33,266 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:34,047 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.15
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:34,291 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:34,421 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:34,421 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:34,421 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:34,421 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:35,458 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:36,570 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent's assumptions are in line with the overall sector trends and historical data. The industry_agent's assumptions show some discrepancies with historical data, especially in revenue projections. The sub_industry_agent's assumptions are consistent with industry-specific trends and historical data. The scenario_agent's assumptions are logical and align well with the current market conditions. The company_agent's assumptions are mostly accurate, but there are slight deviations in cost projections. The feedback_agent's assumptions provide valuable insights but lack specificity in certain areas. The historical_data_agent's assumptions serve as a benchmark for comparison and are crucial for evaluating other agents' assumptions. The sentiment_agent's assumptions reflect positive market sentiment but may be overly optimistic given the current economic environment.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.6,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.85,
        "company_agent": 0.7,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:36,571 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06052117263843648, 0.23462540716612376, 0.6306188925081434, 0.10560260586319217, 0.02504885993485342, 0.5198697068403909)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:36,598 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent and comparing them with historical data, market conditions, and industry specifics, the following analysis and confidence scores are assigned:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:36,599 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06103559870550161, 0.23705501618122973, 0.63042071197411, 0.10440129449838187, 0.026763754045307446, 0.5817152103559872)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:37,215 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores: The sector_agent's assumptions align well with the overall sector trends and historical data, showing a good understanding of the market dynamics. Confidence Score: 0.8. The industry_agent's assumptions are mostly in line with industry benchmarks, but there are some discrepancies in revenue projections that need further justification. Confidence Score: 0.7. The sub_industry_agent's assumptions demonstrate a deep understanding of the sub-industry dynamics, with well-supported growth projections. Confidence Score: 0.9. The scenario_agent's assumptions provide a comprehensive analysis of different scenarios, but some assumptions lack clarity and need more detailed explanations. Confidence Score: 0.6. The company_agent's assumptions show a strong grasp of the company's specific financials and operations, with detailed reasoning behind each assumption. Confidence Score: 0.9. The feedback_agent's assumptions offer valuable insights and suggestions for improvement, enhancing the overall quality of the financial projections. Confidence Score: 0.8. The historical_data_agent's assumptions provide a solid foundation based on historical data analysis, serving as a reliable reference point for future projections. Confidence Score: 0.9. The sentiment_agent's assumptions reflect market sentiment well, but some assumptions may be overly optimistic and require adjustment based on more conservative estimates. Confidence Score: 0.7.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.9,
        "scenario_agent": 0.6,
        "company_agent": 0.9,
        "feedback_agent": 0.8,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:37,216 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06058823529411764, 0.2344705882352941, 0.6247058823529411, 0.10376470588235293, 0.025411764705882356, 0.5258823529411766)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:37,350 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:37,396 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:38,075 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:38,203 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:38,885 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:38,958 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:39,602 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:39,777 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:40,567 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:40,801 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:40,802 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:41,301 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:41,302 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:41,603 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:41,631 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:41,840 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:42,087 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:42,113 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:42,367 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:42,536 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:43,351 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:44,281 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.08,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.60
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:45,142 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:45,143 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:46,088 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:46,113 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:46,295 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:47,095 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:47,095 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:47,095 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:47,096 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:47,157 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:47,157 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:47,157 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:47,157 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:48,046 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:48,068 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:49,278 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and evaluations for each agent's output:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.9,
        "company_agent": 0.75,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.85,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:49,279 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.05990196078431372, 0.23522875816993463, 0.6137254901960785, 0.10549019607843138, 0.025130718954248364, 0.5527777777777778)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:50,011 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:50,813 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:51,230 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations and confidence scores: The sector_agent's assumptions are in line with the overall sector trends and historical data, showing a good understanding of the macroeconomic environment. Confidence score: 0.8. The industry_agent's assumptions are mostly consistent with industry-specific data, but there are some discrepancies in the growth projections compared to historical performance. Confidence score: 0.7. The sub_industry_agent's assumptions align well with sub-industry dynamics and historical patterns, demonstrating a deep understanding of the niche market. Confidence score: 0.9. The scenario_agent's assumptions present a range of scenarios with logical reasoning, considering various external factors impacting the financial outlook. Confidence score: 0.85. The company_agent's assumptions are detailed and tailored to the company's specific operations, reflecting a high level of domain expertise. Confidence score: 0.95. The feedback_agent's assumptions provide valuable insights and suggestions for improvement, enhancing the overall quality of the financial projections. Confidence score: 0.8. The historical_data_agent's assumptions serve as a benchmark for evaluating other agents' projections, offering a reliable reference point for comparison. Confidence score: 0.9. The sentiment_agent's assumptions incorporate market sentiment analysis, enriching the financial forecasts with qualitative data. Confidence score: 0.75.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.9,
        "scenario_agent": 0.85,
        "company_agent": 0.95,
        "feedback_agent": 0.8,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:51,231 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06032085561497326, 0.2352406417112299, 0.6147058823529412, 0.10588235294117647, 0.02540106951871657, 0.5516042780748662)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:51,251 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:51,251 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:51,251 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:51,251 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 07:59:51,784 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:52,308 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.15,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:52,490 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:53,442 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:53,443 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:54,189 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:54,215 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 07:59:54,403 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 07:59:54,742 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and evaluations: The sector_agent's assumptions align well with the overall sector trends and historical data. The industry_agent's assumptions are mostly in line with industry specifics, but there are some discrepancies in the growth projections. The sub_industry_agent's assumptions show a good understanding of sub-industry dynamics, with logical coherence in the assumptions. The scenario_agent's assumptions provide a range of scenarios, reflecting a comprehensive analysis of potential outcomes. The company_agent's assumptions are detailed and specific to the company's operations, showing a deep understanding of the business. The feedback_agent's assumptions incorporate feedback from stakeholders, enhancing the reliability of the data. The historical_data_agent's assumptions are based on actual historical data, providing a solid foundation for comparison. The sentiment_agent's assumptions reflect market sentiment and investor behavior, adding a qualitative aspect to the analysis.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.85,
        "company_agent": 0.9,
        "feedback_agent": 0.8,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:54,743 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.058928571428571434, 0.2330952380952381, 0.6285714285714287, 0.10333333333333333, 0.02476190476190476, 0.5071428571428572)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 07:59:59,856 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 07:59:59,856 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 07:59:59,856 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 07:59:59,857 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:00:01,089 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.15,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:00:03,649 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent's assumptions align well with industry trends and historical data, showing a good understanding of the sector dynamics. The industry_agent's assumptions are mostly in line with sector trends but show some discrepancies in revenue growth projections. The sub_industry_agent's assumptions are consistent with industry averages but lack detailed justification for certain cost assumptions. The scenario_agent's assumptions are logical and coherent, reflecting a deep understanding of potential market scenarios. The company_agent's assumptions demonstrate a strong grasp of the company's specific financials and operational aspects. The feedback_agent's assumptions provide valuable insights and suggestions for improvement, enhancing the overall quality of assumptions. The historical_data_agent's assumptions serve as a benchmark for comparison and validation, highlighting any significant deviations in the other agents' assumptions. The sentiment_agent's assumptions reflect market sentiment accurately, contributing to a holistic view of the financial landscape.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.75,
        "sub_industry_agent": 0.70,
        "scenario_agent": 0.80,
        "company_agent": 0.90,
        "feedback_agent": 0.80,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.85
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:00:03,650 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.0593498452012384, 0.23402476780185757, 0.6291021671826625, 0.10569659442724459, 0.025015479876160995, 0.5352941176470588)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:21,894 DEBUG: Existing labels: ['TotalRevenue', 'OperatingRevenue', 'CostOfRevenue', 'GrossProfit', 'OperatingExpense', 'SellingGeneralAndAdministration', 'DepreciationAmortizationDepletionIncomeStatement', 'DepreciationAndAmortizationInIncomeStatement', 'Amortization', 'AmortizationOfIntangiblesIncomeStatement', 'OperatingIncome', 'NetNonOperatingInterestIncomeExpense', 'InterestIncomeNonOperating', 'InterestExpenseNonOperating', 'TotalOtherFinanceCost', 'OtherIncomeExpense', 'GainOnSaleOfSecurity', 'EarningsFromEquityInterest', 'SpecialIncomeCharges', 'RestructuringAndMergernAcquisition', 'OtherSpecialCharges', 'GainOnSaleOfBusiness', 'GainOnSaleOfPPE', 'OtherNonOperatingIncomeExpenses', 'PretaxIncome', 'TaxProvision', 'NetIncomeCommonStockholders', 'NetIncome', 'NetIncomeIncludingNoncontrollingInterests', 'NetIncomeContinuousOperations', 'NetIncomeDiscontinuousOperations', 'NetIncomeExtraordinary', 'MinorityInterests', 'DilutedNIAvailtoComStockholders', 'BasicEPS', 'DilutedEPS', 'BasicAverageShares', 'DilutedAverageShares', 'TotalExpenses', 'NetIncomeFromContinuingAndDiscontinuedOperation', 'NormalizedIncome', 'InterestIncome', 'InterestExpense', 'NetInterestIncome', 'EBIT', 'EBITDA', 'ReconciledCostOfRevenue', 'ReconciledDepreciation', 'NetIncomeFromContinuingOperationNetMinorityInterest', 'TotalUnusualItemsExcludingGoodwill', 'TotalUnusualItems', 'NormalizedEBITDA', 'TaxRateForCalcs', 'TaxEffectOfUnusualItems'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 08:03:21,901 DEBUG: Field mapping: {'Revenue': 'TotalRevenue', 'COGS': 'CostOfRevenue', 'Operating Expenses': 'OperatingExpense'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 08:03:21,905 DEBUG: Existing labels: ['TotalAssets', 'CurrentAssets', 'CashCashEquivalentsAndShortTermInvestments', 'CashAndCashEquivalents', 'Receivables', 'AccountsReceivable', 'TaxesReceivable', 'OtherReceivables', 'ReceivablesAdjustmentsAllowances', 'Inventory', 'PrepaidAssets', 'CurrentDeferredAssets', 'CurrentDeferredTaxesAssets', 'OtherCurrentAssets', 'TotalNonCurrentAssets', 'NetPPE', 'GrossPPE', 'Properties', 'LandAndImprovements', 'BuildingsAndImprovements', 'MachineryFurnitureEquipment', 'OtherProperties', 'ConstructionInProgress', 'Leases', 'AccumulatedDepreciation', 'GoodwillAndOtherIntangibleAssets', 'Goodwill', 'OtherIntangibleAssets', 'InvestmentsAndAdvances', 'LongTermEquityInvestment', 'InvestmentinFinancialAssets', 'AvailableForSaleSecurities', 'NonCurrentAccountsReceivable', 'NonCurrentDeferredAssets', 'NonCurrentPrepaidAssets', 'OtherNonCurrentAssets', 'TotalLiabilitiesNetMinorityInterest', 'CurrentLiabilities', 'PayablesAndAccruedExpenses', 'Payables', 'AccountsPayable', 'TotalTaxPayable', 'IncomeTaxPayable', 'OtherPayable', 'CurrentAccruedExpenses', 'PensionandOtherPostRetirementBenefitPlansCurrent', 'CurrentDebtAndCapitalLeaseObligation', 'CurrentDebt', 'CurrentDeferredLiabilities', 'CurrentDeferredRevenue', 'OtherCurrentLiabilities', 'TotalNonCurrentLiabilitiesNetMinorityInterest', 'LongTermDebtAndCapitalLeaseObligation', 'LongTermDebt', 'LongTermCapitalLeaseObligation', 'NonCurrentDeferredLiabilities', 'NonCurrentDeferredTaxesLiabilities', 'NonCurrentDeferredRevenue', 'EmployeeBenefits', 'NonCurrentPensionAndOtherPostretirementBenefitPlans', 'PreferredSecuritiesOutsideStockEquity', 'OtherNonCurrentLiabilities', 'TotalEquityGrossMinorityInterest', 'StockholdersEquity', 'CapitalStock', 'PreferredStock', 'CommonStock', 'RetainedEarnings', 'TreasuryStock', 'GainsLossesNotAffectingRetainedEarnings', 'ForeignCurrencyTranslationAdjustments', 'OtherEquityAdjustments', 'OtherEquityInterest', 'MinorityInterest', 'TotalCapitalization', 'CommonStockEquity', 'CapitalLeaseObligations', 'NetTangibleAssets', 'WorkingCapital', 'InvestedCapital', 'TangibleBookValue', 'TotalDebt', 'NetDebt', 'ShareIssued', 'OrdinarySharesNumber', 'TreasurySharesNumber'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 08:03:21,909 DEBUG: Field mapping: {'Current Assets': 'CurrentAssets', 'Current Liabilities': 'CurrentLiabilities'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 08:03:21,915 DEBUG: Existing labels: ['OperatingCashFlow', 'CashFlowFromContinuingOperatingActivities', 'NetIncomeFromContinuingOperations', 'OperatingGainsLosses', 'GainLossOnSaleOfBusiness', 'GainLossOnSaleOfPPE', 'GainLossOnInvestmentSecurities', 'EarningsLossesFromEquityInvestments', 'PensionAndEmployeeBenefitExpense', 'DepreciationAmortizationDepletion', 'DepreciationAndAmortization', 'Depreciation', 'AmortizationCashFlow', 'AmortizationOfIntangibles', 'DeferredTax', 'DeferredIncomeTax', 'AssetImpairmentCharge', 'StockBasedCompensation', 'OtherNonCashItems', 'ChangeInWorkingCapital', 'ChangeInReceivables', 'ChangeInInventory', 'ChangeInPayablesAndAccruedExpense', 'ChangeInPayable', 'ChangeInTaxPayable', 'ChangeInIncomeTaxPayable', 'ChangeInAccountPayable', 'ChangeInOtherCurrentAssets', 'ChangeInOtherCurrentLiabilities', 'ChangeInOtherWorkingCapital', 'DividendReceivedCFO', 'CashFromDiscontinuedOperatingActivities', 'InvestingCashFlow', 'CashFlowFromContinuingInvestingActivities', 'NetPPEPurchaseAndSale', 'PurchaseOfPPE', 'SaleOfPPE', 'NetBusinessPurchaseAndSale', 'PurchaseOfBusiness', 'SaleOfBusiness', 'NetInvestmentPurchaseAndSale', 'PurchaseOfInvestment', 'SaleOfInvestment', 'NetOtherInvestingChanges', 'CashFromDiscontinuedInvestingActivities', 'FinancingCashFlow', 'CashFlowFromContinuingFinancingActivities', 'NetIssuancePaymentsOfDebt', 'NetLongTermDebtIssuance', 'LongTermDebtIssuance', 'LongTermDebtPayments', 'NetShortTermDebtIssuance', 'NetCommonStockIssuance', 'CommonStockIssuance', 'CommonStockPayments', 'CashDividendsPaid', 'CommonStockDividendPaid', 'ProceedsFromStockOptionExercised', 'NetOtherFinancingCharges', 'CashFromDiscontinuedFinancingActivities', 'CashFlowFromDiscontinuedOperation', 'EndCashPosition', 'ChangesInCash', 'EffectOfExchangeRateChanges', 'BeginningCashPosition', 'OtherCashAdjustmentOutsideChangeinCash', 'IncomeTaxPaidSupplementalData', 'InterestPaidSupplementalData', 'CapitalExpenditure', 'IssuanceOfCapitalStock', 'IssuanceOfDebt', 'RepaymentOfDebt', 'RepurchaseOfCapitalStock', 'FreeCashFlow'] [in /home/ec2-user/financial_modeling_assistant/app.py:945]
2024-12-05 08:03:21,921 DEBUG: Field mapping: {'Depreciation': 'Depreciation', 'Capital Expenditures': 'CapitalExpenditure'} [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 08:03:33,347 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:33,860 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:33,892 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:34,421 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:34,712 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:34,771 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:35,478 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:35,530 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:35,785 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:36,326 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:36,366 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:36,664 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:37,450 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:37,455 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:37,479 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:37,472 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:37,716 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:37,729 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:38,192 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:38,250 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:38,380 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:03:38,385 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:03:38,412 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:38,621 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:03:38,652 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:03:38,670 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:03:38,860 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:03:42,968 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:42,968 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:03:42,968 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:03:42,968 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:03:43,415 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:43,416 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:03:43,416 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:03:43,416 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:03:43,837 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:43,837 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:03:43,837 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:03:43,837 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:03:43,904 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.15
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:44,669 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.1,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:44,745 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:45,363 DEBUG: Agent output: {
    "reasoning": "Upon reviewing the financial assumptions provided by each agent, the following analysis and confidence scores are assigned based on adherence to specified ranges, consistency with sector, industry, and company specifics, logical coherence, historical data alignment, and domain expertise.",

    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:45,365 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.059969788519637475, 0.2336858006042296, 0.626283987915408, 0.10507552870090636, 0.025015105740181273, 0.5302114803625378)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:45,931 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:45,933 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.061883116883116894, 0.23701298701298704, 0.6136363636363638, 0.10545454545454547, 0.02577922077922078, 0.5762987012987014)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:46,205 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:46,477 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.9,
        "company_agent": 0.75,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:46,480 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.0597427652733119, 0.23482315112540192, 0.6308681672025724, 0.10540192926045017, 0.02504823151125402, 0.5239549839228297)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:46,734 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:47,029 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:47,343 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:47,600 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:47,791 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:48,091 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:48,469 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:48,635 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:48,998 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:49,295 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:49,424 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:49,425 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:49,790 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:50,138 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:50,164 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:03:50,198 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:50,199 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:50,465 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:03:50,634 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:50,635 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:51,043 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.15,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:51,071 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:03:51,323 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.15, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:03:51,544 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:51,569 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:03:51,771 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:03:55,526 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:55,527 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:03:55,527 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:03:55,527 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:03:55,973 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:55,973 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:03:55,974 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:03:55,974 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:03:56,574 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:57,031 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:57,937 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:57,937 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:03:57,937 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:03:57,937 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:03:58,773 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key observations: The sector_agent, industry_agent, and sub_industry_agent assumptions are generally aligned with historical data and current market conditions. The scenario_agent has provided a conservative estimate, which is in line with the historical performance of the company. The company_agent has made optimistic assumptions, deviating slightly from historical trends. The feedback_agent has provided insightful comments but lacks specific quantitative data. The historical_data_agent has provided a solid foundation for comparison. The sentiment_agent's assumptions are in line with positive market sentiment. Overall, the assumptions are mostly reasonable, with some discrepancies in the company_agent's optimistic projections.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.80,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.90,
        "company_agent": 0.70,
        "feedback_agent": 0.60,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.85
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:58,774 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06015197568389057, 0.2343161094224924, 0.6310030395136779, 0.10583586626139817, 0.024984802431610942, 0.5231003039513679)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:03:58,966 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:03:59,596 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:00,340 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:01,220 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:01,484 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent's assumptions align well with industry trends and historical data, showing a good understanding of the broader economic environment. The industry_agent's assumptions are mostly consistent with sector trends but show some discrepancies in growth projections. The sub_industry_agent's assumptions are detailed and specific, reflecting a deep understanding of the sub-industry dynamics. The scenario_agent's assumptions provide a range of scenarios, demonstrating a comprehensive analysis of potential outcomes. The company_agent's assumptions are tailored to the company's specific situation, showing a strong grasp of internal factors. The feedback_agent's assumptions incorporate feedback from various stakeholders, enhancing the overall reliability. The historical_data_agent provides a solid foundation for comparison, ensuring that assumptions are grounded in past performance. The sentiment_agent's assumptions reflect market sentiment and investor behavior, adding a qualitative perspective to the analysis.",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.75,
        "sub_industry_agent": 0.80,
        "scenario_agent": 0.85,
        "company_agent": 0.90,
        "feedback_agent": 0.80,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.70
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:01,485 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06040462427745665, 0.2352023121387283, 0.6286127167630058, 0.10358381502890174, 0.025317919075144506, 0.5367052023121387)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:01,933 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:02,090 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key findings: 

1. **Sector Agent**:
   - The sector_agent's assumptions align well with industry trends and historical data.
   - There are minor discrepancies in growth rates, but they are within an acceptable range.
   - Confidence Score: 0.85

2. **Industry Agent**:
   - The industry_agent's assumptions show a good understanding of the specific industry dynamics.
   - Revenue projections are slightly optimistic compared to historical data.
   - Cost assumptions are reasonable and in line with sector benchmarks.
   - Confidence Score: 0.75

3. **Sub-Industry Agent**:
   - The sub_industry_agent's assumptions are conservative, especially in revenue growth.
   - Cost projections are well justified and realistic.
   - There is a lack of detail in certain areas, impacting the overall confidence.
   - Confidence Score: 0.65

4. **Scenario Agent**:
   - The scenario_agent's assumptions present a bullish outlook, especially in revenue growth.
   - Cost assumptions are on the higher side, impacting profitability projections.
   - The scenario_agent's assumptions need further justification to increase confidence.
   - Confidence Score: 0.60

5. **Company Agent**:
   - The company_agent's assumptions are detailed and specific to the company's operations.
   - Revenue projections are in line with historical growth rates.
   - Cost assumptions are slightly optimistic, requiring further validation.
   - Confidence Score: 0.80

6. **Feedback Agent**:
   - The feedback_agent's input provides valuable insights into market sentiment and external factors.
   - The feedback aligns well with current market conditions and industry news.
   - Confidence Score: 0.90

7. **Historical Data Agent**:
   - The historical_data_agent's data serves as a crucial benchmark for evaluating other agents' assumptions.
   - Discrepancies between historical data and some agents' assumptions require further investigation.
   - Confidence Score: 0.95

8. **Sentiment Agent**:
   - The sentiment_agent's analysis of market sentiment and investor behavior adds a qualitative dimension to the financial assumptions.
   - The sentiment_agent's insights complement the quantitative data provided by other agents.
   - Confidence Score: 0.85
}",
    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.75,
        "sub_industry_agent": 0.65,
        "scenario_agent": 0.60,
        "company_agent": 0.80,
        "feedback_agent": 0.90,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.85
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:02,090 ERROR: Error parsing JSON in validation_agent [in /home/ec2-user/financial_modeling_assistant/app.py:780]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 772, in validation_agent
    response = json.loads(json_match.group())
  File "/usr/lib64/python3.9/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python3.9/json/decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python3.9/json/decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Invalid control character at: line 2 column 112 (char 113)
2024-12-05 08:04:02,093 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060000000000000005, 0.23545454545454544, 0.6295454545454546, 0.10727272727272728, 0.025454545454545455, 0.5545454545454547)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:02,308 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:02,866 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:02,867 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:02,949 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:03,160 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:03,614 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:03,641 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:04:03,654 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:03,836 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:04:03,955 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:04,417 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:04,742 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:05,586 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:05,675 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:05,676 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:06,454 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:06,455 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:06,484 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:06,509 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:04:06,726 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:04:07,240 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.15,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:07,268 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:04:07,486 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'WACC': 0.15, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:04:08,125 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:08,125 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:04:08,125 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:04:08,125 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:04:09,067 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.15,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.2,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:10,306 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores for each agent's output:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:10,307 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06102564102564102, 0.23692307692307688, 0.6157051282051281, 0.10628205128205127, 0.025769230769230766, 0.575)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:11,133 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:11,907 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:11,907 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:04:11,907 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:04:11,907 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:04:11,914 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:12,076 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:12,076 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:04:12,076 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:04:12,076 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:04:12,739 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:12,834 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:13,154 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:13,541 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:14,408 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:14,409 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback."WACC_feedback" AS "feedback_WACC_feedback", feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:15,203 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.25,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:15,229 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:618]
2024-12-05 08:04:15,324 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the key findings: The sector_agent, industry_agent, and sub_industry_agent assumptions are generally aligned with historical data and current market conditions. There are minor discrepancies in the scenario_agent's assumptions, particularly in revenue growth projections. The company_agent's assumptions are well-supported by industry-specific data and historical performance. The feedback_agent's assumptions provide valuable insights into potential risks and opportunities. The historical_data_agent's assumptions serve as a reliable benchmark for evaluating other agents' outputs. The sentiment_agent's assumptions reflect a positive outlook but may be slightly optimistic compared to other agents' projections.",

    "confidence_scores": {
        "sector_agent": 0.85,
        "industry_agent": 0.80,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.70,
        "company_agent": 0.85,
        "feedback_agent": 0.80,
        "historical_data_agent": 0.90,
        "sentiment_agent": 0.75
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:15,325 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.060609756097560974, 0.23536585365853657, 0.627439024390244, 0.10682926829268291, 0.02548780487804878, 0.5359756097560975)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:15,407 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:807]
2024-12-05 08:04:15,545 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the comparisons and assessments: The sector_agent's assumptions align well with historical data and industry trends, showing a good understanding of the sector's dynamics. The industry_agent's assumptions are generally in line with sector trends but show some discrepancies in growth projections compared to historical data. The sub_industry_agent's assumptions are quite optimistic, especially in revenue growth, which may be challenging to achieve given the current market conditions. The scenario_agent's assumptions provide a range of scenarios, reflecting uncertainty in the market, but some scenarios seem overly pessimistic. The company_agent's assumptions are detailed and specific to the company's operations, showing a deep understanding of its internal dynamics. The feedback_agent's assumptions provide valuable insights into potential risks and opportunities, although some assumptions lack specificity. The historical_data_agent's data serves as a crucial benchmark for evaluating other agents' assumptions, and it aligns well with past performance. The sentiment_agent's assumptions reflect market sentiment but may not fully capture the underlying financial dynamics.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.65,
        "company_agent": 0.75,
        "feedback_agent": 0.6,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.5
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:15,546 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06, 0.23426666666666665, 0.627, 0.1056, 0.0252, 0.5379999999999999)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:04:20,496 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:20,496 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:836]
2024-12-05 08:04:20,496 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "WACC": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.7
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "WACC": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:840]
2024-12-05 08:04:20,496 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'WACC': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'WACC': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:845]
2024-12-05 08:04:21,483 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:24,405 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores: The sector_agent's assumptions are in line with the overall sector trends and historical data, showing a good understanding of the macroeconomic environment. Confidence score: 0.8. The industry_agent's assumptions align well with industry-specific factors and historical performance, demonstrating a solid grasp of industry dynamics. Confidence score: 0.85. The sub_industry_agent's assumptions are mostly consistent with sub-industry specifics and historical patterns, although there are some minor discrepancies. Confidence score: 0.75. The scenario_agent's assumptions present a plausible range of scenarios, considering various potential outcomes, but could benefit from more detailed analysis. Confidence score: 0.7. The company_agent's assumptions show a deep understanding of the company's operations and financials, with a focus on key performance indicators. Confidence score: 0.9. The feedback_agent's assumptions provide valuable insights and suggestions for improvement, enhancing the overall quality of the assumptions. Confidence score: 0.8. The historical_data_agent's assumptions are based on accurate historical data and trends, serving as a reliable benchmark for comparison. Confidence score: 0.95. The sentiment_agent's assumptions reflect market sentiment and investor behavior, contributing to a holistic view of the financial landscape. Confidence score: 0.8.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.85,
        "sub_industry_agent": 0.75,
        "scenario_agent": 0.7,
        "company_agent": 0.9,
        "feedback_agent": 0.8,
        "historical_data_agent": 0.95,
        "sentiment_agent": 0.8
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:04:24,406 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1265]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1246, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, "WACC", terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06052631578947369, 0.2347953216374269, 0.6263157894736843, 0.10561403508771929, 0.025380116959064322, 0.5426900584795321)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:04,880 DEBUG: Existing labels: ['TotalRevenue', 'OperatingRevenue', 'CostOfRevenue', 'GrossProfit', 'OperatingExpense', 'SellingGeneralAndAdministration', 'DepreciationAmortizationDepletionIncomeStatement', 'DepreciationAndAmortizationInIncomeStatement', 'Amortization', 'AmortizationOfIntangiblesIncomeStatement', 'OperatingIncome', 'NetNonOperatingInterestIncomeExpense', 'InterestIncomeNonOperating', 'InterestExpenseNonOperating', 'TotalOtherFinanceCost', 'OtherIncomeExpense', 'GainOnSaleOfSecurity', 'EarningsFromEquityInterest', 'SpecialIncomeCharges', 'RestructuringAndMergernAcquisition', 'OtherSpecialCharges', 'GainOnSaleOfBusiness', 'GainOnSaleOfPPE', 'OtherNonOperatingIncomeExpenses', 'PretaxIncome', 'TaxProvision', 'NetIncomeCommonStockholders', 'NetIncome', 'NetIncomeIncludingNoncontrollingInterests', 'NetIncomeContinuousOperations', 'NetIncomeDiscontinuousOperations', 'NetIncomeExtraordinary', 'MinorityInterests', 'DilutedNIAvailtoComStockholders', 'BasicEPS', 'DilutedEPS', 'BasicAverageShares', 'DilutedAverageShares', 'TotalExpenses', 'NetIncomeFromContinuingAndDiscontinuedOperation', 'NormalizedIncome', 'InterestIncome', 'InterestExpense', 'NetInterestIncome', 'EBIT', 'EBITDA', 'ReconciledCostOfRevenue', 'ReconciledDepreciation', 'NetIncomeFromContinuingOperationNetMinorityInterest', 'TotalUnusualItemsExcludingGoodwill', 'TotalUnusualItems', 'NormalizedEBITDA', 'TaxRateForCalcs', 'TaxEffectOfUnusualItems'] [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 08:15:04,888 DEBUG: Field mapping: {'Revenue': 'TotalRevenue', 'COGS': 'CostOfRevenue', 'Operating Expenses': 'OperatingExpense'} [in /home/ec2-user/financial_modeling_assistant/app.py:959]
2024-12-05 08:15:04,892 DEBUG: Existing labels: ['TotalAssets', 'CurrentAssets', 'CashCashEquivalentsAndShortTermInvestments', 'CashAndCashEquivalents', 'Receivables', 'AccountsReceivable', 'TaxesReceivable', 'OtherReceivables', 'ReceivablesAdjustmentsAllowances', 'Inventory', 'PrepaidAssets', 'CurrentDeferredAssets', 'CurrentDeferredTaxesAssets', 'OtherCurrentAssets', 'TotalNonCurrentAssets', 'NetPPE', 'GrossPPE', 'Properties', 'LandAndImprovements', 'BuildingsAndImprovements', 'MachineryFurnitureEquipment', 'OtherProperties', 'ConstructionInProgress', 'Leases', 'AccumulatedDepreciation', 'GoodwillAndOtherIntangibleAssets', 'Goodwill', 'OtherIntangibleAssets', 'InvestmentsAndAdvances', 'LongTermEquityInvestment', 'InvestmentinFinancialAssets', 'AvailableForSaleSecurities', 'NonCurrentAccountsReceivable', 'NonCurrentDeferredAssets', 'NonCurrentPrepaidAssets', 'OtherNonCurrentAssets', 'TotalLiabilitiesNetMinorityInterest', 'CurrentLiabilities', 'PayablesAndAccruedExpenses', 'Payables', 'AccountsPayable', 'TotalTaxPayable', 'IncomeTaxPayable', 'OtherPayable', 'CurrentAccruedExpenses', 'PensionandOtherPostRetirementBenefitPlansCurrent', 'CurrentDebtAndCapitalLeaseObligation', 'CurrentDebt', 'CurrentDeferredLiabilities', 'CurrentDeferredRevenue', 'OtherCurrentLiabilities', 'TotalNonCurrentLiabilitiesNetMinorityInterest', 'LongTermDebtAndCapitalLeaseObligation', 'LongTermDebt', 'LongTermCapitalLeaseObligation', 'NonCurrentDeferredLiabilities', 'NonCurrentDeferredTaxesLiabilities', 'NonCurrentDeferredRevenue', 'EmployeeBenefits', 'NonCurrentPensionAndOtherPostretirementBenefitPlans', 'PreferredSecuritiesOutsideStockEquity', 'OtherNonCurrentLiabilities', 'TotalEquityGrossMinorityInterest', 'StockholdersEquity', 'CapitalStock', 'PreferredStock', 'CommonStock', 'RetainedEarnings', 'TreasuryStock', 'GainsLossesNotAffectingRetainedEarnings', 'ForeignCurrencyTranslationAdjustments', 'OtherEquityAdjustments', 'OtherEquityInterest', 'MinorityInterest', 'TotalCapitalization', 'CommonStockEquity', 'CapitalLeaseObligations', 'NetTangibleAssets', 'WorkingCapital', 'InvestedCapital', 'TangibleBookValue', 'TotalDebt', 'NetDebt', 'ShareIssued', 'OrdinarySharesNumber', 'TreasurySharesNumber'] [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 08:15:04,898 DEBUG: Field mapping: {'Current Assets': 'CurrentAssets', 'Current Liabilities': 'CurrentLiabilities'} [in /home/ec2-user/financial_modeling_assistant/app.py:959]
2024-12-05 08:15:04,901 DEBUG: Existing labels: ['OperatingCashFlow', 'CashFlowFromContinuingOperatingActivities', 'NetIncomeFromContinuingOperations', 'OperatingGainsLosses', 'GainLossOnSaleOfBusiness', 'GainLossOnSaleOfPPE', 'GainLossOnInvestmentSecurities', 'EarningsLossesFromEquityInvestments', 'PensionAndEmployeeBenefitExpense', 'DepreciationAmortizationDepletion', 'DepreciationAndAmortization', 'Depreciation', 'AmortizationCashFlow', 'AmortizationOfIntangibles', 'DeferredTax', 'DeferredIncomeTax', 'AssetImpairmentCharge', 'StockBasedCompensation', 'OtherNonCashItems', 'ChangeInWorkingCapital', 'ChangeInReceivables', 'ChangeInInventory', 'ChangeInPayablesAndAccruedExpense', 'ChangeInPayable', 'ChangeInTaxPayable', 'ChangeInIncomeTaxPayable', 'ChangeInAccountPayable', 'ChangeInOtherCurrentAssets', 'ChangeInOtherCurrentLiabilities', 'ChangeInOtherWorkingCapital', 'DividendReceivedCFO', 'CashFromDiscontinuedOperatingActivities', 'InvestingCashFlow', 'CashFlowFromContinuingInvestingActivities', 'NetPPEPurchaseAndSale', 'PurchaseOfPPE', 'SaleOfPPE', 'NetBusinessPurchaseAndSale', 'PurchaseOfBusiness', 'SaleOfBusiness', 'NetInvestmentPurchaseAndSale', 'PurchaseOfInvestment', 'SaleOfInvestment', 'NetOtherInvestingChanges', 'CashFromDiscontinuedInvestingActivities', 'FinancingCashFlow', 'CashFlowFromContinuingFinancingActivities', 'NetIssuancePaymentsOfDebt', 'NetLongTermDebtIssuance', 'LongTermDebtIssuance', 'LongTermDebtPayments', 'NetShortTermDebtIssuance', 'NetCommonStockIssuance', 'CommonStockIssuance', 'CommonStockPayments', 'CashDividendsPaid', 'CommonStockDividendPaid', 'ProceedsFromStockOptionExercised', 'NetOtherFinancingCharges', 'CashFromDiscontinuedFinancingActivities', 'CashFlowFromDiscontinuedOperation', 'EndCashPosition', 'ChangesInCash', 'EffectOfExchangeRateChanges', 'BeginningCashPosition', 'OtherCashAdjustmentOutsideChangeinCash', 'IncomeTaxPaidSupplementalData', 'InterestPaidSupplementalData', 'CapitalExpenditure', 'IssuanceOfCapitalStock', 'IssuanceOfDebt', 'RepaymentOfDebt', 'RepurchaseOfCapitalStock', 'FreeCashFlow'] [in /home/ec2-user/financial_modeling_assistant/app.py:952]
2024-12-05 08:15:04,908 DEBUG: Field mapping: {'Depreciation': 'Depreciation', 'Capital Expenditures': 'CapitalExpenditure'} [in /home/ec2-user/financial_modeling_assistant/app.py:959]
2024-12-05 08:15:16,940 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:17,737 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:18,537 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:18,567 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:18,696 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:19,471 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:19,510 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:19,552 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:20,326 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:20,517 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:20,530 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback.wacc_feedback AS feedback_wacc_feedback, feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:20,580 DEBUG: Agent output: {
  "revenue_growth_rate": 0.07,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:21,231 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:21,518 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.08,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.85
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:21,624 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:21,748 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:625]
2024-12-05 08:15:22,216 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:814]
2024-12-05 08:15:22,259 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:22,271 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback.wacc_feedback AS feedback_wacc_feedback, feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:22,564 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:22,577 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback.wacc_feedback AS feedback_wacc_feedback, feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:23,127 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:23,304 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:625]
2024-12-05 08:15:23,351 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.15,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:23,485 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:625]
2024-12-05 08:15:23,609 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:814]
2024-12-05 08:15:23,781 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'wacc': 0.15, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:814]
2024-12-05 08:15:27,341 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:27,341 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:843]
2024-12-05 08:15:27,341 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.6
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:847]
2024-12-05 08:15:27,341 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.6}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:852]
2024-12-05 08:15:28,078 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:28,078 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:843]
2024-12-05 08:15:28,078 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "industry_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.8
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:847]
2024-12-05 08:15:28,078 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:852]
2024-12-05 08:15:28,540 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:28,711 DEBUG: Agent output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:28,711 DEBUG: Raw OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:843]
2024-12-05 08:15:28,711 DEBUG: Cleaned OpenAI output: {
    "sector_agent": {
        "revenue_growth_rate": 0.06,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.8
    },
    "industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "sub_industry_agent": {
        "revenue_growth_rate": 0.07,
        "tax_rate": 0.25,
        "cogs_pct": 0.65,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "scenario_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.25,
        "cogs_pct": 0.75,
        "wacc": 0.08,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.85
    },
    "company_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "feedback_agent": {
        "revenue_growth_rate": 0.08,
        "tax_rate": 0.25,
        "cogs_pct": 0.6,
        "wacc": 0.12,
        "terminal_growth_rate": 0.03,
        "operating_expenses_pct": 0.75
    },
    "historical_data_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    },
    "sentiment_agent": {
        "revenue_growth_rate": 0.05,
        "tax_rate": 0.21,
        "cogs_pct": 0.6,
        "wacc": 0.1,
        "terminal_growth_rate": 0.02,
        "operating_expenses_pct": 0.2
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:847]
2024-12-05 08:15:28,711 DEBUG: Refined agent adjustments: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.07, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.08, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.85}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:852]
2024-12-05 08:15:28,963 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.3,
  "sentiment_agent": 0.05
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:29,734 DEBUG: Agent output: {
  "sector_agent": 0.1,
  "industry_agent": 0.1,
  "sub_industry_agent": 0.1,
  "scenario_agent": 0.1,
  "company_agent": 0.2,
  "feedback_agent": 0.05,
  "historical_data_agent": 0.25,
  "sentiment_agent": 0.1
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:30,236 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.65,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:30,238 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1272]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1253, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, wacc, terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06107255520504732, 0.23460567823343842, 0.6274447949526814, 0.10529968454258676, 0.025205047318611985, 0.5430599369085174)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:30,940 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores:",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.7,
        "sub_industry_agent": 0.6,
        "scenario_agent": 0.75,
        "company_agent": 0.85,
        "feedback_agent": 0.7,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:30,943 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1272]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1253, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, wacc, terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.0621656050955414, 0.23496815286624206, 0.6277070063694268, 0.10229299363057325, 0.025286624203821658, 0.5579617834394905)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:31,363 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:31,559 DEBUG: Agent output: {
    "reasoning": "After reviewing the financial assumptions provided by each agent, here are the assessments and confidence scores: The sector_agent's assumptions were within reasonable ranges and aligned well with the sector's performance, earning a confidence score of 0.8. The industry_agent's assumptions showed some discrepancies with historical data and lacked detailed justification, resulting in a confidence score of 0.6. The sub_industry_agent's assumptions were consistent with industry trends and specific company dynamics, warranting a confidence score of 0.9. The scenario_agent's assumptions were logical and well-supported, receiving a confidence score of 0.85. The company_agent's assumptions demonstrated a deep understanding of the company's financials and market positioning, earning a confidence score of 0.95. The feedback_agent's assumptions were vague and lacked specificity, leading to a confidence score of 0.5. The historical_data_agent provided solid data and reasoning, resulting in a confidence score of 0.9. The sentiment_agent's assumptions were optimistic but lacked concrete evidence, leading to a confidence score of 0.7.",
    "confidence_scores": {
        "sector_agent": 0.8,
        "industry_agent": 0.6,
        "sub_industry_agent": 0.9,
        "scenario_agent": 0.85,
        "company_agent": 0.95,
        "feedback_agent": 0.5,
        "historical_data_agent": 0.9,
        "sentiment_agent": 0.7
    }
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:31,562 ERROR: Error in /calculate route [in /home/ec2-user/financial_modeling_assistant/app.py:1272]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: assumption_set

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 1253, in calculate_intrinsic_value
    db.session.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    transaction.rollback(_capture_exception=True)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: assumption_set
[SQL: INSERT INTO assumption_set (sector, industry, sub_industry, scenario, stock_ticker, revenue_growth_rate, tax_rate, cogs_pct, wacc, terminal_growth_rate, operating_expenses_pct) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case', 'DIS', 0.06155688622754491, 0.23538922155688624, 0.6290419161676647, 0.1035928143712575, 0.025329341317365268, 0.5386227544910179)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:32,025 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:32,467 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:32,670 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:32,800 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:33,322 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:33,448 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:33,755 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.8
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:34,188 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:34,376 DEBUG: Agent output: {
  "revenue_growth_rate": 0.06,
  "tax_rate": 0.25,
  "cogs_pct": 0.65,
  "WACC": 0.12,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:34,881 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:34,882 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback.wacc_feedback AS feedback_wacc_feedback, feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:35,033 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.1,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.6
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:35,195 DEBUG: Agent output: {
  "revenue_growth_rate": 0.05,
  "tax_rate": 0.25,
  "cogs_pct": 0.75,
  "WACC": 0.08,
  "terminal_growth_rate": 0.02,
  "operating_expenses_pct": 0.85
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:35,687 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:35,714 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:625]
2024-12-05 08:15:35,850 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.10,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:35,851 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback.wacc_feedback AS feedback_wacc_feedback, feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:35,965 DEBUG: Agent adjustments before collaboration: {'sector_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.8}, 'industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'sub_industry_agent': {'revenue_growth_rate': 0.06, 'tax_rate': 0.25, 'cogs_pct': 0.65, 'wacc': 0.12, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'scenario_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.25, 'cogs_pct': 0.75, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.8}, 'company_agent': {'revenue_growth_rate': 0.08, 'tax_rate': 0.25, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.75}, 'feedback_agent': {'revenue_growth_rate': 0.8, 'tax_rate': 0.3, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.03, 'operating_expenses_pct': 0.7}, 'historical_data_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}, 'sentiment_agent': {'revenue_growth_rate': 0.05, 'tax_rate': 0.21, 'cogs_pct': 0.6, 'wacc': 0.1, 'terminal_growth_rate': 0.02, 'operating_expenses_pct': 0.2}} [in /home/ec2-user/financial_modeling_assistant/app.py:814]
2024-12-05 08:15:36,078 DEBUG: Agent output: {
  "revenue_growth_rate": 0.08,
  "tax_rate": 0.25,
  "cogs_pct": 0.60,
  "WACC": 0.07,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.75
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:36,080 ERROR: Error summarizing feedback [in /home/ec2-user/financial_modeling_assistant/app.py:159]
Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such table: feedback

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ec2-user/financial_modeling_assistant/app.py", line 115, in summarize_feedback
    feedback_entries = Feedback.query.join(AssumptionSet).filter(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2673, in all
    return self._iter().all()  # type: ignore
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/query.py", line 2827, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/ec2-user/financial_modeling_assistant/venv/lib64/python3.9/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: feedback
[SQL: SELECT feedback.id AS feedback_id, feedback.sector AS feedback_sector, feedback.industry AS feedback_industry, feedback.sub_industry AS feedback_sub_industry, feedback.scenario AS feedback_scenario, feedback.score AS feedback_score, feedback.comments AS feedback_comments, feedback.created_at AS feedback_created_at, feedback.revenue_growth_feedback AS feedback_revenue_growth_feedback, feedback.tax_rate_feedback AS feedback_tax_rate_feedback, feedback.cogs_pct_feedback AS feedback_cogs_pct_feedback, feedback.operating_expenses_feedback AS feedback_operating_expenses_feedback, feedback.wacc_feedback AS feedback_wacc_feedback, feedback.assumption_set_id AS feedback_assumption_set_id 
FROM feedback JOIN assumption_set ON assumption_set.id = feedback.assumption_set_id 
WHERE assumption_set.sector = ? AND assumption_set.industry = ? AND assumption_set.sub_industry = ? AND assumption_set.scenario = ?]
[parameters: ('Consumer Discretionary', 'Consumer Services', 'Hotels, Restaurants & Leisure', 'Base Case')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-12-05 08:15:36,790 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:36,842 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:625]
2024-12-05 08:15:36,891 DEBUG: Agent output: {
  "revenue_growth_rate": 0.8,
  "tax_rate": 0.3,
  "cogs_pct": 0.6,
  "WACC": 0.1,
  "terminal_growth_rate": 0.03,
  "operating_expenses_pct": 0.7
} [in /home/ec2-user/financial_modeling_assistant/app.py:204]
2024-12-05 08:15:36,949 WARNING: Field 'Income Before Tax' not found in financial data for DIS. [in /home/ec2-user/financial_modeling_assistant/app.py:625]
